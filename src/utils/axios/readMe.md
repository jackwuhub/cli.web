# Axios äºŒæ¬¡å°è£…

## åŠŸèƒ½æè¿°
> #### 1. æ”¯æŒ5ç§å¸¸è§„restfulæ–¹æ³• getã€postã€putã€deleteã€patch
> #### 2. è¯·æ±‚æ¯æ¬¡é‡æ–°åˆ›å»ºaxioså¯¹è±¡ï¼Œç›¸äº’éš”ç¦»
> #### 3. å¸¦æœ‰ä¸‹è½½ã€ä¸Šä¼ è¿›åº¦è·Ÿè¸ª
> #### 4. å¯æ§é‡å¤è¯·æ±‚æ‹¦æˆªï¼Œå‡å°‘httpè¯·æ±‚é‡
> #### 5. æ‹†é™¤api serveréƒ¨åˆ†ï¼Œå¯ä»¥é¢å‘å¤šä¸ªæœåŠ¡è¿›è¡Œéš”ç¦»
> #### 6. å†…ç½®success fail complete å›è°ƒæ–¹æ³•
##ä¸¾ä¸ªæ —å­ğŸŒ°
```js
import { get,post,put,delete, patch } from 'axios'
get({
    api:'', // apiè·¯ç”±åœ°å€
    server:'', // æœåŠ¡å™¨åœ°å€
    success: (res) => {}, // è¯·æ±‚æˆåŠŸå›è°ƒ
    fail: (error) => {}, // è¯·æ±‚å¤±è´¥å›è°ƒ
    complete: () => {}, // è¯·æ±‚å®Œæˆå›è°ƒ
    onDownload:(percent,res) => {}, // ç›‘æ§ä¸‹è½½
    onUpload: (percent,res) => {}, // ç›‘æ§ä¸Šä¼ 
    onlyOnce: false, // æ‹¦æˆªé‡å¤è¯·æ±‚å¼€å…³
    params:{}, // å‚æ•°
    data: {}, // formData ä¼ é€’æ ¼å¼
    routerParams:{}, // è·¯ç”±å‚æ•°
    headers:{}, // è¯·æ±‚å¤´é…ç½®
    ...defaultConfig // é»˜è®¤axiosé…ç½®
})

```


##æ–‡ä»¶æ¨¡æ¿
éœ€è¦ä¸¤ä¸ªå¤–éƒ¨æ–‡ä»¶è¿›è¡Œé…ç½®å¼€å‘
> ##api
> ```js
> {
>  user: "/v1/user/{brandId}", // æ­¤å¤„{brandId} å³ä¸ºè·¯ç”±å‚æ•°ï¼Œä½¿ç”¨routerParamsè¿›è¡Œèµ‹å€¼
>  psDown: '/down/700cb8c55986dc55d8bd229429883baf/FSNotes-5.3.4.dmg?cts=dx-f-D115A227A193A117F58019&ctp=115A227A193A117&ctt=1642514513&limit=1&spd=340000&ctk=700cb8c55986dc55d8bd229429883baf&chk=e25d29cd88a850099329e038e5ebf548-15928825'
> }
>```

>##server
> ```js
>    baseApi: "/baseApi", // è·¯ç”±è½¬å‘åœ°å€ï¼Œæ ¹æ®nodeä»£ç†è¿›è¡Œåˆç†é…ç½®
>    downloadP:'/downloadP'
> ```




##æ³¨æ„äº‹é¡¹âš ï¸
> ####  1. *server* ä¸ºå®é™…å¼€å‘ nodeä»£ç†åçš„æœåŠ¡å™¨åœ°å€åç§°
> ####  2. ä¸è®ºæ˜¯è¯·æ±‚æˆåŠŸä¸å¤±è´¥ *complete* éƒ½ä¼šæ‰§è¡Œï¼Œå¯ä»¥æ§åˆ¶ä¸€äº›loadingæ–¹æ³•
> ####  3. è¯·æ±‚å¤´é»˜è®¤ä½¿ç”¨ *application/json* æ ¼å¼ï¼Œå¦‚éœ€æ›´æ”¹ä½¿ç”¨headerå¯¹è±¡å¡«å†™å³å¯
> ####  4. *routerParams* ç¼–å†™ api ä¸­å¯¹åº”çš„ *routerId* å‚æ•°
> ####  5. onlyOnce = true æ—¶å¼€å¯é‡å¤æ£€æµ‹ï¼Œå½“å‰ä¸€ä¸ªè¯·æ±‚æœªå®Œæˆï¼Œå†æ¬¡è¯·æ±‚ä¼šåœæ­¢å‰ä¸€ä¸ªè¯·æ±‚ï¼Œä¿è¯æ•°æ®å”¯ä¸€
> ####  6. then() / catch() åªè´Ÿè´£è¯·æ±‚å“åº”æ•°æ®, ä¸æ¶‰åŠä¸šåŠ¡
> ####  7. success / fail åªè´Ÿè´£ä¸šåŠ¡, å“åº”æ•°æ®ä¼šè¿›è¡ŒåŒ…è£¹, éœ€è¦è¿›è¡Œä¸šåŠ¡è½¬æ¢å¤„ç†

## A&Q
>#### Q:å¦‚ä½•æ‹¦æˆªé‡å¤è¯·æ±‚ï¼Ÿ 
>#### A: ä½¿ç”¨cancelTokenæ–¹æ³•è¿›è¡Œæ§åˆ¶ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå­˜å‚¨ä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ ¹æ®url + methodsä½œä¸ºkeyè¿›è¡Œå­˜å‚¨ï¼Œè¯·æ±‚æˆåŠŸæˆ–å¤±è´¥éƒ½ä¼šå‡ºé˜Ÿ
> 
>#### Q: æœ€ç»ˆè¯·æ±‚é“¾æ¥æ˜¯å¦‚ä½•æ•´åˆçš„ï¼Ÿ
>#### Aï¼šä½¿ç”¨api + server + routerParams å‚æ•°è¿›è¡Œæ•´åˆurl
